<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Handmade Crafts Marketplace</title>
    <style>
      body {
        font-family: sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f8f8f8;
        color: #333;
      }
      header {
        background-color: #a0522d;
        color: white;
        padding: 10px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
      }
      header h1 {
        margin: 0;
        font-size: 1.5em;
      }
      header nav a {
        color: white;
        margin: 0 10px;
        text-decoration: none;
      }
      header nav a:hover {
        text-decoration: underline;
      }
      .search-bar {
        display: flex;
        align-items: center;
        margin: 10px 0;
      }
      .search-bar input {
        padding: 5px;
        border: none;
        border-radius: 3px 0 0 3px;
      }
      .search-bar button {
        padding: 5px 10px;
        background-color: #d2b48c;
        border: none;
        border-radius: 0 3px 3px 0;
        cursor: pointer;
        color: #333;
      }
      .search-bar button:hover {
        background-color: #c0a078;
      }
      .cart-icon {
        position: relative;
        cursor: pointer;
      }
      .cart-count {
        position: absolute;
        top: -8px;
        right: -8px;
        background-color: red;
        color: white;
        border-radius: 50%;
        padding: 2px 5px;
        font-size: 0.8em;
      }

      main {
        padding: 20px;
      }
      .view {
        display: none;
      }
      .view.active {
        display: block;
      }

      /* Homepage Styles */
      .homepage .hero {
        background-color: #d2b48c;
        padding: 40px 20px;
        text-align: center;
        margin-bottom: 20px;
      }
      .homepage .hero h2 {
        margin-top: 0;
        color: #333;
      }
      .homepage .featured-products h3 {
        margin-top: 0;
        border-bottom: 1px solid #ccc;
        padding-bottom: 10px;
      }
      .product-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 20px;
      }
      .product-item {
        background-color: white;
        border: 1px solid #ccc;
        padding: 10px;
        text-align: center;
        cursor: pointer;
      }
      .product-item img {
        max-width: 100%;
        height: 120px;
        object-fit: cover;
        margin-bottom: 10px;
      }
      .product-item h4 {
        margin: 0 0 5px 0;
        font-size: 1em;
      }
      .product-item p {
        margin: 0;
        font-weight: bold;
        color: #a0522d;
      }

      /* Product Detail Styles */
      .product-detail {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
      }
      .product-detail .product-images {
        flex: 1 1 300px;
      }
      .product-detail .product-images img {
        max-width: 100%;
        height: auto;
        border: 1px solid #ccc;
      }
      .product-detail .product-info {
        flex: 2 1 400px;
      }
      .product-detail h2 {
        margin-top: 0;
      }
      .product-detail .price {
        font-size: 1.5em;
        color: #a0522d;
        margin-bottom: 10px;
      }
      .product-detail .add-to-cart-btn {
        background-color: #d2b48c;
        color: #333;
        border: none;
        padding: 10px 20px;
        cursor: pointer;
        font-size: 1em;
        border-radius: 3px;
        margin-top: 15px;
      }
      .product-detail .add-to-cart-btn:hover {
        background-color: #c0a078;
      }
      .product-detail .reviews h4 {
        margin-top: 20px;
        border-top: 1px solid #eee;
        padding-top: 10px;
      }

      /* Cart Styles */
      .cart h2 {
        margin-top: 0;
        border-bottom: 1px solid #ccc;
        padding-bottom: 10px;
      }
      .cart-items .cart-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 1px solid #eee;
        padding: 10px 0;
      }
      .cart-item .item-info {
        display: flex;
        align-items: center;
      }
      .cart-item img {
        width: 50px;
        height: 50px;
        object-fit: cover;
        margin-right: 10px;
      }
      .cart-item .item-details h4 {
        margin: 0 0 5px 0;
        font-size: 1em;
      }
      .cart-item .item-details p {
        margin: 0;
        color: #a0522d;
      }
      .cart-item .item-quantity input {
        width: 40px;
        text-align: center;
        margin: 0 5px;
      }
      .cart-item .remove-item-btn {
        background-color: #e74c3c;
        color: white;
        border: none;
        padding: 5px 10px;
        cursor: pointer;
        border-radius: 3px;
        font-size: 0.8em;
      }
      .cart-summary {
        text-align: right;
        margin-top: 20px;
      }
      .cart-summary .subtotal {
        font-size: 1.2em;
        font-weight: bold;
        margin-bottom: 10px;
      }
      .cart-summary .checkout-btn {
        background-color: #a0522d;
        color: white;
        border: none;
        padding: 10px 20px;
        cursor: pointer;
        font-size: 1.1em;
        border-radius: 3px;
      }
      .cart-summary .checkout-btn:hover {
        background-color: #8b4513;
      }

      /* Placeholder Styles */
      .placeholder {
        padding: 20px;
        text-align: center;
        color: #666;
      }
      .form-group {
        margin-bottom: 15px;
        text-align: left;
      }
      .form-group label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
      }
      .form-group input,
      .form-group textarea {
        width: 100%;
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 3px;
        box-sizing: border-box;
      }
      .btn-primary {
        background-color: #a0522d;
        color: white;
        border: none;
        padding: 10px 20px;
        cursor: pointer;
        border-radius: 3px;
        font-size: 1em;
      }
      .btn-primary:hover {
        background-color: #8b4513;
      }

      footer {
        background-color: #333;
        color: white;
        text-align: center;
        padding: 20px;
        margin-top: 30px;
      }
      footer nav a {
        color: white;
        margin: 0 10px;
        text-decoration: none;
      }
      footer nav a:hover {
        text-decoration: underline;
      }

      /* Responsive Styles */
      @media (max-width: 768px) {
        header {
          flex-direction: column;
          align-items: flex-start;
        }
        header nav {
          margin-top: 10px;
        }
        header nav a {
          display: block;
          margin: 5px 0;
        }
        .search-bar {
          width: 100%;
          margin: 10px 0;
        }
        .search-bar input {
          flex-grow: 1;
        }
        .product-grid {
          grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        }
        .product-detail {
          flex-direction: column;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <h1>Handmade Haven</h1>
      <nav>
        <a href="#" data-view="homepage">Home</a>
        <a href="#" data-view="product-list">Shop</a>
        <a href="#" data-view="login">Login</a>
        <a href="#" data-view="register">Register</a>
      </nav>
      <div class="search-bar">
        <input type="text" placeholder="Search for crafts..." />
        <button>Search</button>
      </div>
      <div class="cart-icon" data-view="cart">
        ðŸ›’ <span class="cart-count">0</span>
      </div>
    </header>

    <main>
      <div id="homepage" class="view active">
        <section class="hero">
          <h2>Discover Unique Handmade Treasures</h2>
          <p>
            Support independent artisans and find perfect handcrafted items.
          </p>
        </section>
        <section class="featured-products">
          <h3>Featured Products</h3>
          <div class="product-grid"></div>
        </section>
      </div>

      <div id="product-list" class="view">
        <h2>All Products</h2>
        <div class="product-grid"></div>
      </div>

      <div id="product-detail" class="view">
        <div class="product-detail">
          <div class="product-images">
            <img src="placeholder-detail.jpg" alt="Product Image" />
          </div>
          <div class="product-info">
            <h2 id="detail-title">Product Title</h2>
            <p class="price" id="detail-price">$0.00</p>
            <p id="detail-description">Detailed description of the product.</p>
            <button class="add-to-cart-btn" id="add-to-cart-btn">
              Add to Cart
            </button>
            <div class="reviews">
              <h4>Customer Reviews</h4>
              <p>No reviews yet.</p>
            </div>
          </div>
        </div>
      </div>

      <div id="cart" class="view">
        <h2>Your Shopping Cart</h2>
        <div class="cart-items"></div>
        <div class="cart-summary">
          <p class="subtotal">
            Subtotal: $<span id="cart-subtotal">0.00</span>
          </p>
          <button class="checkout-btn" data-view="checkout">
            Proceed to Checkout
          </button>
        </div>
      </div>

      <div id="checkout" class="view placeholder">
        <h2>Checkout</h2>
        <p>Checkout process steps go here.</p>
        <div class="form-group">
          <label for="shippingAddress">Shipping Address:</label>
          <textarea id="shippingAddress"></textarea>
        </div>
        <div class="form-group">
          <label for="paymentInfo">Payment Information:</label>
          <input type="text" id="paymentInfo" placeholder="Card Number, etc." />
        </div>
        <button class="btn-primary">Place Order</button>
      </div>

      <div id="login" class="view placeholder">
        <h2>Login</h2>
        <p>Login form goes here.</p>
        <div class="form-group">
          <label for="loginEmail">Email:</label>
          <input type="email" id="loginEmail" />
        </div>
        <div class="form-group">
          <label for="loginPassword">Password:</label>
          <input type="password" id="loginPassword" />
        </div>
        <button class="btn-primary">Login</button>
      </div>

      <div id="register" class="view placeholder">
        <h2>Register</h2>
        <p>Registration form goes here.</p>
        <div class="form-group">
          <label for="registerEmail">Email:</label>
          <input type="email" id="registerEmail" />
        </div>
        <div class="form-group">
          <label for="registerPassword">Password:</label>
          <input type="password" id="registerPassword" />
        </div>
        <button class="btn-primary">Register</button>
      </div>

      <div id="user-profile" class="view placeholder">
        <h2>User Profile</h2>
        <p>Manage your profile and addresses here.</p>
      </div>

      <div id="order-history" class="view placeholder">
        <h2>Order History</h2>
        <p>Your past orders will appear here.</p>
      </div>

      <div id="seller-dashboard" class="view placeholder">
        <h2>Seller Dashboard</h2>
        <p>Manage products, orders, and payouts.</p>
      </div>

      <div id="admin-dashboard" class="view placeholder">
        <h2>Admin Dashboard</h2>
        <p>Manage users, products, and site settings.</p>
      </div>
    </main>

    <footer>
      <nav>
        <a href="#">About Us</a>
        <a href="#">Contact</a>
        <a href="#">Terms</a>
        <a href="#">Privacy</a>
      </nav>
      <p>&copy; 2023 Handmade Haven. All rights reserved.</p>
    </footer>

    <script>
      const views = document.querySelectorAll(".view");
      const navLinks = document.querySelectorAll("header nav a, [data-view]");
      const productGrids = document.querySelectorAll(".product-grid");
      const homepageFeaturedGrid = document.querySelector(
        "#homepage .product-grid"
      );
      const allProductsGrid = document.querySelector(
        "#product-list .product-grid"
      );
      const detailTitle = document.getElementById("detail-title");
      const detailPrice = document.getElementById("detail-price");
      const detailDescription = document.getElementById("detail-description");
      const detailImage = document.querySelector(
        "#product-detail .product-images img"
      );
      const addToCartBtn = document.getElementById("add-to-cart-btn");
      const cartItemsContainer = document.querySelector(".cart-items");
      const cartSubtotalSpan = document.getElementById("cart-subtotal");
      const cartCountSpan = document.querySelector(".cart-count");

      let products = [
        {
          id: 1,
          name: "Handmade Mug",
          price: 18.5,
          image: "https://via.placeholder.com/180x120?text=Mug",
          description: "A beautiful ceramic mug.",
        },
        {
          id: 2,
          name: "Wooden Coasters (Set of 4)",
          price: 25.0,
          image: "https://via.placeholder.com/180x120?text=Coasters",
          description: "Set of 4 engraved wooden coasters.",
        },
        {
          id: 3,
          name: "Knitted Scarf",
          price: 35.0,
          image: "https://via.placeholder.com/180x120?text=Scarf",
          description: "Soft wool knitted scarf.",
        },
        {
          id: 4,
          name: "Leather Wallet",
          price: 50.0,
          image: "https://via.placeholder.com/180x120?text=Wallet",
          description: "Hand-stitched leather wallet.",
        },
        {
          id: 5,
          name: "Painted Canvas",
          price: 85.0,
          image: "https://via.placeholder.com/180x120?text=Canvas",
          description: "Original acrylic painting on canvas.",
        },
        {
          id: 6,
          name: "Silver Ring",
          price: 45.0,
          image: "https://via.placeholder.com/180x120?text=Ring",
          description: "Sterling silver handcrafted ring.",
        },
      ];

      let cart = [];

      function showView(viewId) {
        views.forEach((view) => view.classList.remove("active"));
        const activeView = document.getElementById(viewId);
        if (activeView) {
          activeView.classList.add("active");
        } else {
          document.getElementById("homepage").classList.add("active");
          console.error("View not found:", viewId);
        }
      }

      function renderProducts(gridElement, productArray) {
        gridElement.innerHTML = "";
        productArray.forEach((product) => {
          const productItem = document.createElement("div");
          productItem.classList.add("product-item");
          productItem.dataset.productId = product.id;
          productItem.innerHTML = `
                    <img src="${product.image}" alt="${product.name}">
                    <h4>${product.name}</h4>
                    <p>$${product.price.toFixed(2)}</p>
                `;
          productItem.addEventListener("click", () =>
            renderProductDetail(product.id)
          );
          gridElement.appendChild(productItem);
        });
      }

      function renderProductDetail(productId) {
        const product = products.find((p) => p.id === productId);
        if (!product) {
          console.error("Product not found:", productId);
          showView("homepage");
          return;
        }
        detailTitle.textContent = product.name;
        detailPrice.textContent = `$${product.price.toFixed(2)}`;
        detailDescription.textContent = product.description;
        detailImage.src = product.image.replace("180x120", "400x300"); // Use a larger placeholder image
        detailImage.alt = product.name;
        addToCartBtn.dataset.productId = product.id;
        showView("product-detail");
      }

      function updateCartCount() {
        const count = cart.reduce((sum, item) => sum + item.quantity, 0);
        cartCountSpan.textContent = count;
      }

      function updateCartTotal() {
        const total = cart.reduce(
          (sum, item) => sum + item.price * item.quantity,
          0
        );
        cartSubtotalSpan.textContent = total.toFixed(2);
      }

      function renderCart() {
        cartItemsContainer.innerHTML = "";
        if (cart.length === 0) {
          cartItemsContainer.innerHTML = "<p>Your cart is empty.</p>";
        } else {
          cart.forEach((item) => {
            const cartItemElement = document.createElement("div");
            cartItemElement.classList.add("cart-item");
            cartItemElement.innerHTML = `
                        <div class="item-info">
                            <img src="${item.image}" alt="${item.name}">
                            <div class="item-details">
                                <h4>${item.name}</h4>
                                <p>$${item.price.toFixed(2)}</p>
                            </div>
                        </div>
                        <div class="item-quantity">
                            Qty: <input type="number" value="${
                              item.quantity
                            }" min="1" data-item-id="${item.id}">
                            <button class="remove-item-btn" data-item-id="${
                              item.id
                            }">Remove</button>
                        </div>
                    `;
            cartItemsContainer.appendChild(cartItemElement);
          });

          cartItemsContainer
            .querySelectorAll(".item-quantity input")
            .forEach((input) => {
              input.addEventListener("change", handleQuantityChange);
            });
          cartItemsContainer
            .querySelectorAll(".remove-item-btn")
            .forEach((button) => {
              button.addEventListener("click", handleRemoveItem);
            });
        }
        updateCartTotal();
        updateCartCount();
      }

      function addToCart(productId) {
        const product = products.find((p) => p.id === productId);
        if (!product) return;

        const existingItemIndex = cart.findIndex(
          (item) => item.id === productId
        );

        if (existingItemIndex > -1) {
          cart[existingItemIndex].quantity++;
        } else {
          cart.push({ ...product, quantity: 1 });
        }
        updateCartCount();
        alert(`${product.name} added to cart!`);
      }

      function handleQuantityChange(event) {
        const itemId = parseInt(event.target.dataset.itemId);
        const newQuantity = parseInt(event.target.value);
        const item = cart.find((i) => i.id === itemId);
        if (item && newQuantity > 0) {
          item.quantity = newQuantity;
          renderCart();
        } else if (newQuantity <= 0) {
          removeFromCart(itemId);
        }
      }

      function handleRemoveItem(event) {
        const itemId = parseInt(event.target.dataset.itemId);
        removeFromCart(itemId);
      }

      function removeFromCart(itemId) {
        cart = cart.filter((item) => item.id !== itemId);
        renderCart();
      }

      // Event Listeners for Navigation
      navLinks.forEach((link) => {
        link.addEventListener("click", (event) => {
          event.preventDefault();
          const viewId = link.dataset.view;
          if (viewId) {
            if (viewId === "cart") {
              renderCart();
            }
            showView(viewId);
          }
        });
      });

      // Event Listener for Add to Cart Button
      addToCartBtn.addEventListener("click", (event) => {
        const productId = parseInt(event.target.dataset.productId);
        addToCart(productId);
      });

      // Initial render
      document.addEventListener("DOMContentLoaded", () => {
        renderProducts(homepageFeaturedGrid, products.slice(0, 4)); // Show first 4 on homepage
        renderProducts(allProductsGrid, products); // Show all on product list page
        showView("homepage"); // Start on the homepage
        updateCartCount(); // Initialize cart count display
      });
    </script>
  </body>
</html>
